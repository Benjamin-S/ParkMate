@{
    ViewData["Title"] = "Search";
}

<br/>
<h1> Search </h1>
<br/>

<input class="form-control form-control-lg" type="text" autocomplete="off" placeholder="Search..." id="searchBar">
<ul class="list-group" id="results"></ul>

@section Scripts {
    <script>
        $("#searchBar").on("input",
            function() {
                var inputText = $(this).val();

                if (inputText.length >= 2) {
                    $.get('@Url.Action("SearchAutoComplete")',
                        { searchInput: inputText },
                        function(data) {
                            $("#results").empty();

                            for (i = 0; i < data.length; i++) {                           
                                $("#results").append('<a href="#" class="list-group-item list-group-item-action" ' +
                                    'id="' + data[i].id +'">' +
                                    data[i].street + ", " +
                                    data[i].city + ", " +
                                    data[i].state +
                                    "</li>");
                            }

                            if ($("#results").is(":hidden")) {
                                $("#results").show();
                            }
                        });
                }
            });

        $(document).on("click", "#results > a", function() {
            
            $("#searchBar").val($(this).text());
            $("#results").empty();

            //POST function for selection goes here
        });
    </script>
}